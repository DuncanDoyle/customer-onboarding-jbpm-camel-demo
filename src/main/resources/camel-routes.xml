<?xml version="1.0" encoding="UTF-8"?>
<routes id="routes-c6e723e3-4841-48cd-aefe-dfd8cada3e7e" xmlns="http://camel.apache.org/schema/spring">
    <route id="storeCustomerRoute">
        <!-- Content-Type is set twice on the HTTP request ... no idea why .... -->
        <from id="direct-getCustomerRoute" uri="direct:getCustomer"/>
        <setHeader headerName="Accept" id="_setHeader15">
            <constant>application/json</constant>
        </setHeader>
        <setHeader headerName="Exchange.CONTENT_TYPE" id="_setHeaderContentType">
            <constant>application/json</constant>
        </setHeader>
	<setHeader headerName="id" id="_setCustomerIdInHeader">
		<simple>${body.getParameter("Customer").getContact()}</simple>
	</setHeader>
        <setBody>
        	<simple>${null}</simple>
        </setBody>
	<to id="logNettyBodyWithComponentBefore" uri="log:org.ddoyle.jbpm.camel?level=WARN"/>
	<log id="logNettyBodyBefore" message="Netty reponse body: ${out.body}" loggingLevel="WARN"/>
        <to id="toGetCustomerFuse" uri="rest:get:id/{id}?host=localhost:8082/customer"/>
	<log id="logNettyInBody" message="Netty reponse in body: ${in.body}" loggingLevel="WARN"/>
	<log id="logNettyOutBody" message="Netty reponse out body: ${out.body}" loggingLevel="WARN"/>
	<to id="logNettyBodyWithComponent" uri="log:org.ddoyle.jbpm.camel?level=WARN"/>
	<convertBodyTo type="java.lang.String"/>
    </route>
</routes>
